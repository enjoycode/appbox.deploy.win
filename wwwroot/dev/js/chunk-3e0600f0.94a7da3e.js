(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e0600f0"],{1160:function(t,e,n){"use strict";var i=n("e0ee"),o=n.n(i);o.a},"124e":function(t,e,n){},"2f49":function(t,e,n){"use strict";n.d(e,"a",(function(){return X}));n("6c7b"),n("c5f6");var i,o=n("d225"),r=n("b0b4"),s=n("308d"),a=n("6bb5"),h=n("4e2b"),c=n("a374"),u=n("978d"),l=n("1771"),f=n("3458"),d=function(){function t(){Object(o["a"])(this,t),this.Figures=new Array}return Object(r["a"])(t,[{key:"CreatePath",value:function(){var t=new Path2D,e=this.Figures[0];return e.FillToPath(t),t}}]),t}();(function(t){t[t["EvenOdd"]=0]="EvenOdd",t[t["Nonzero"]=1]="Nonzero"})(i||(i={}));var v,g=function(){function t(){Object(o["a"])(this,t)}return Object(r["a"])(t,[{key:"FillToPath",value:function(t){t.lineTo(this.Point.X,this.Point.Y)}}]),t}(),y=function(){function t(){Object(o["a"])(this,t),this.IsClosed=!1,this.IsFilled=!0,this.StartPoint=new u["a"](0,0),this.Segments=new Array}return Object(r["a"])(t,[{key:"FillToPath",value:function(t){t.moveTo(this.StartPoint.X,this.StartPoint.Y);for(var e=0;e<this.Segments.length;e++){var n=this.Segments[e];n.FillToPath(t)}}},{key:"Fetch",value:function(t){this.StartPoint=t.StartPoint;for(var e=0;e<t.Segments.length;e++){var n=t.Segments[e];if(1!==n.Type)throw new Error("Not implemented.");var i=new g;i.Point=n.Point,this.Segments.push(i)}}}]),t}();(function(t){t[t["Polyline"]=0]="Polyline",t[t["Bezier"]=1]="Bezier",t[t["Spline"]=2]="Spline"})(v||(v={}));var C,_=v,S=n("fe0c"),m=(n("ac4d"),n("8a81"),n("ac6a"),function(){function t(){Object(o["a"])(this,t)}return Object(r["a"])(t,null,[{key:"GetConnectorsBounds",value:function(t){if(!t||0==t.Connectors.length)return new c["a"](0,0,0,0);var e=Number.MAX_VALUE,n=Number.MAX_VALUE,i=Number.MIN_VALUE,o=Number.MIN_VALUE,r=!0,s=!1,a=void 0;try{for(var h,u=t.Connectors[Symbol.iterator]();!(r=(h=u.next()).done);r=!0){var l=h.value,f=l.AbsolutePosition;e=Math.min(e,f.X),n=Math.min(n,f.Y),i=Math.max(i,f.X),o=Math.max(o,f.Y)}}catch(d){s=!0,a=d}finally{try{r||null==u.return||u.return()}finally{if(s)throw a}}return new c["a"](e,n,i-e,o-n)}},{key:"GetNearestConnector2",value:function(t,e){return null!=t?this.GetNearestConnector(t,e,Number.MAX_VALUE):null}},{key:"GetNearestConnector",value:function(t,e,n){return console.log("GetNearestConnector todo ..."),null}}]),t}()),P=5,p=5,w=function(){function t(){Object(o["a"])(this,t)}return Object(r["a"])(t,null,[{key:"ActivateNearestConnector",value:function(t,e,n,i){var o=t.DesignService.GetShapes();if(0!==o.length){for(var r=new Array,s=0;s<o.length;s++){var a=m.GetConnectorsBounds(o[s]);a.Inflate(P,P),a.Contains(i.X,i.Y)&&o[s].CanConnect(n,e)&&r.push(o[s])}if(r.length>0)for(s=r.length-1;s>=0;s--)for(var h=r[s],c=0;c<h.Connectors.length;c++){var l=u["a"].Distance(h.Connectors[c].AbsolutePosition,i);if(l<P&&l<p)return void(t.Adorners.ActiveConnector=h.Connectors[c])}t.Adorners.UpdateNearestShapes(r)}}}]),t}();(function(t){t[t["Intermediate"]=0]="Intermediate",t[t["First"]=1]="First",t[t["Last"]=2]="Last"})(C||(C={}));var k=C,I=function t(){Object(o["a"])(this,t)},T=function(t){function e(t,n){var i;return Object(o["a"])(this,e),i=Object(s["a"])(this,Object(a["a"])(e).call(this,t,n)),i._pointSize=6,i._moveDeltaX=0,i._moveDeltaY=0,i}return Object(h["a"])(e,t),Object(r["a"])(e,[{key:"ResetCache",value:function(){this._pointsCache=null}},{key:"GetEditPoints",value:function(){if(null!=this._pointsCache)return this._pointsCache;var t=this.Target,e=t.Bounds.X,n=t.Bounds.Y,i=new Array,o=t.StartPoint,r=new c["a"](o.X-e-this._pointSize/2,o.Y-n-this._pointSize/2,this._pointSize,this._pointSize),s=new I;s.Type=k.First,s.Rect=r,s.Index=0,i.push(s);var a=t.EndPoint;return r=new c["a"](a.X-e-this._pointSize/2,a.Y-n-this._pointSize/2,this._pointSize,this._pointSize),s=new I,s.Type=k.Last,s.Rect=r,s.Index=i.length,i.push(s),this._pointsCache=i,i}},{key:"HitTest",value:function(t){for(var e=this.GetEditPoints(),n=0;n<e.length;n++)if(e[n].Rect.Contains(t.X,t.Y))return this._hitPoint=e[n],[!0,""];return this._hitPoint=null,[!1,""]}},{key:"OnMouseMove",value:function(t){if(this._hitPoint){var e=this.Target;this._moveDeltaX+=t.DeltaX,this._moveDeltaY+=t.DeltaY,this._hitPoint.Type!=k.First&&this._hitPoint.Type!=k.Last||e.Surface&&w.ActivateNearestConnector(e.Surface,e,this._hitPoint.Type==k.First,new u["a"](t.X,t.Y)),this.Owner.Invalidate()}}},{key:"OnMouseUp",value:function(t){this._moveDeltaX=0,this._moveDeltaY=0}},{key:"OnRender",value:function(t){for(var e=this.GetEditPoints(),n=0;n<e.length;n++)this.DrawEditPoint(t,e[n].Rect);if(this._hitPoint&&(0!==this._moveDeltaX||0!==this._moveDeltaY)){var i=this.Target,o=i.PointToSurface(new u["a"](0,0));t.setLineDash([4,4]),t.strokeStyle="blue",t.lineWidth=1.5,this._hitPoint.Type===k.First?(t.beginPath(),t.moveTo(i.StartPoint.X-o.X+this._moveDeltaX,i.StartPoint.Y-o.Y+this._moveDeltaY),t.lineTo(i.EndPoint.X-o.X,i.EndPoint.Y-o.Y),t.stroke()):this._hitPoint.Type===k.Last&&(t.beginPath(),t.moveTo(i.StartPoint.X-o.X,i.StartPoint.Y-o.Y),t.lineTo(i.EndPoint.X+this._moveDeltaX-o.X,i.EndPoint.Y+this._moveDeltaY-o.Y),t.stroke()),t.setLineDash([])}}},{key:"DrawEditPoint",value:function(t,e){t.fillStyle="white",t.fillRect(e.X,e.Y,e.Width,e.Height),t.strokeStyle="black",t.lineWidth=1,t.strokeRect(e.X,e.Y,e.Width,e.Height)}},{key:"ActiveEditPoint",get:function(){return this._hitPoint}}]),e}(S["a"]),b=function(){function t(){Object(o["a"])(this,t)}return Object(r["a"])(t,null,[{key:"CreateByTwoPoint",value:function(t,e){var n=new c["a"](0,0,0,0);return n.X=Math.min(t.X,e.X),n.Y=Math.min(t.Y,e.Y),n.Width=Math.max(Math.max(t.X,e.X)-n.X,0),n.Height=Math.max(Math.max(t.Y,e.Y)-n.Y,0),n}}]),t}(),X=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(s["a"])(this,Object(a["a"])(e).call(this)),t.ConnectionPoints=new Array,t.isDirty=!1,t.edittingPoint=new u["a"](0,0),t.connectionPoints=new Array,t.startPoint=new u["a"](0,0),t.endPoint=new u["a"](0,0),t}return Object(h["a"])(e,t),Object(r["a"])(e,[{key:"OnSourceChanged",value:function(t){this.isSuppressingConnectionUpdate||this.ResolveSourceConnector()}},{key:"Invalidate",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.Surface&&this.Surface.Invalidate()}},{key:"HitTest",value:function(t,e,n){if(this.Surface){n.lineWidth=4;var i=this.EnsureGeometryPath();if(i)return n.isPointInStroke(i,t*this.Surface.PixelRatio,e*this.Surface.PixelRatio)}return!1}},{key:"EnsureGeometryPath",value:function(){return this._cachedPath||this.geometry&&(this._cachedPath=this.geometry.CreatePath()),this._cachedPath}},{key:"UpdateGeometryPoint",value:function(t,e){if(0==t)this.StartPoint=e;else if(t==this.ConnectionPoints.length+1)this.EndPoint=e;else{this.ConnectionPoints[t-1];this.ConnectionPoints[t-1]=e}this.Update(!1)}},{key:"Update",value:function(t){if(!this.isSuppressingConnectionUpdate){var e=t&&this.Source!=this.Target;this.isDirty||!e?(e||this.CalculateAutoConnectors(!0,!0),this.isDirty=!1):e&&(this.isDirty=!0),null!=this.Parent?this.Parent.Invalidate():null!=this.Surface&&this.Surface.Invalidate()}}},{key:"GetNearestConnector2",value:function(t,e,n){return null}},{key:"GetNearestConnector",value:function(t,e){if(null!=t){var n=new Array;return n.push(t),this.GetNearestConnector2(n,e,Number.MAX_VALUE)}return null}},{key:"CalculateAutoConnectors",value:function(t,e){var n,i;if(t&&null!=this.Source&&this.SourceConnectorPosition==f["a"].Auto&&(n=this.ConnectionPoints.length>0&&this.ConnectionType!=_.Bezier?this.ConnectionPoints[0]:null==this.Target?this.endPoint:new u["a"](this.Target.Bounds.X+this.Target.Bounds.Width/2,this.Target.Bounds.Y+this.Target.Bounds.Height/2),this.SourceConnectorResult=this.GetNearestConnector(this.Source,n),null==this.SourceConnectorResult))for(var o=0;o<this.Source.Connectors.length;o++)if(this.Source.Connectors[o].Name==f["a"].Auto){this.SourceConnectorResult=this.Source.Connectors[o];break}if(e&&null!=this.Target&&this.TargetConnectorPosition==f["a"].Auto&&(i=this.ConnectionPoints.length>0&&this.ConnectionType!=_.Bezier?this.ConnectionPoints[this.ConnectionPoints.length-1]:null==this.Source?this.endPoint:new u["a"](this.Source.Bounds.X+this.Source.Bounds.Width/2,this.Source.Bounds.Y+this.Source.Bounds.Height/2),this.TargetConnectorResult=this.GetNearestConnector(this.Target,i),null==this.TargetConnectorResult))for(o=0;o<this.Target.Connectors.length;o++)if(this.Target.Connectors[o].Name==f["a"].Auto){this.SourceConnectorResult=this.Target.Connectors[o];break}}},{key:"TranslateConnectionPoints",value:function(t){for(var e=new Array,n=0;n<this.ConnectionPoints.length;n++)e.push(t?new u["a"](this.ConnectionPoints[n].X+this.Position.X,this.ConnectionPoints[n].Y+this.Position.Y):new u["a"](this.ConnectionPoints[n].X-this.Position.X,this.ConnectionPoints[n].Y-this.Position.Y));return e}},{key:"SetPosition",value:function(t){this.isInnerChange=!0,this.Position=t,this.isInnerChange=!1}},{key:"SetBounds",value:function(t,e,n,i,o){}},{key:"AllPoints",value:function(){var t=new Array;t.push(this.StartPoint);for(var e=0;e<this.ConnectionPoints.length;e++)t.push(this.ConnectionPoints[e]);return t.push(this.EndPoint),t}},{key:"Paint",value:function(t,e){this.DrawConnectionLine(t,!1),this.DrawConnectionCap(t,this.targetCap),this.DrawConnectionCap(t,this.sourceCap),this.DrawConnectionText(t)}},{key:"DrawConnectionCap",value:function(t,e){if(e){var n=new Path2D;e.FillToPath(n),t.fillStyle="black",t.fill(n)}}},{key:"DrawConnectionLine",value:function(t,e){var n=this.EnsureGeometryPath();n&&(t.strokeStyle="green",t.lineWidth=1.5,t.stroke(n))}},{key:"DrawConnectionText",value:function(t){if(this.title){var e=t.measureText(this.title),n=new c["a"](this.edittingPoint.X+.5,this.edittingPoint.Y,e.width,12);t.fillStyle="white",t.fillRect(n.X,n.Y,n.Width,n.Height),t.fillStyle="black",t.textBaseline="top",t.fillText(this.title,this.edittingPoint.X,this.edittingPoint.Y)}}},{key:"OnTargetChanged",value:function(t){this.isSuppressingConnectionUpdate||this.ResolveTargetConnector()}},{key:"ResolveTargetConnector",value:function(){if(null!=this.Target){if(0==this.Target.Connectors.length)return void console.log("Shape Has No Connectors");if(this.TargetConnectorPosition!=f["a"].Auto){var t=0;for(t=0;t<this.Target.Connectors.length;t++)if(this.Target.Connectors[t].Name==this.TargetConnectorPosition){this.TargetConnectorResult=this.Target.Connectors[t];break}null==this.TargetConnectorResult&&console.log("Connector Doesnt Exist: "+this.TargetConnectorResult)}}else this.TargetConnectorResult=null}},{key:"OnTargetConnectorPositionChanged",value:function(t,e){this.ResolveTargetConnector(),this.Update(!1)}},{key:"ResolveSourceConnector",value:function(){if(null!=this.Source){if(0==this.Source.Connectors.length)return void console.log("Shape Has No Connectors");if(this.SourceConnectorPosition!=f["a"].Auto){var t;for(t=0;t<this.Source.Connectors.length;t++)if(this.Source.Connectors[t].Name==this.SourceConnectorPosition){this.SourceConnectorResult=this.Source.Connectors[t];break}null==this.SourceConnectorResult&&console.log("Connector Doesnt Exist:"+this.SourceConnectorPosition)}}else this.SourceConnectorResult=null}},{key:"OnSourceConnectorPositionChanged",value:function(t,e){this.ResolveSourceConnector(),this.Update(!1)}},{key:"GetConnectionEndPoints",value:function(t){var e=new u["a"](this.StartPoint.X,this.StartPoint.Y),n=new u["a"](this.EndPoint.X,this.EndPoint.Y);return t&&(e=new u["a"](e.X-this.Bounds.X,e.Y-this.Bounds.Y),n=new u["a"](n.X-this.Bounds.X,n.Y-this.Bounds.Y)),[e,n]}},{key:"Distance",value:function(t,e){return Math.sqrt(Math.pow(t.X-e.X,2)+Math.pow(t.Y-e.Y,2))}},{key:"CalculateMiddlePointOfLine",value:function(t,e){var n=new Array;n.push(t[0]);for(var i=0;i<e.length;i++)n[1+i]=e[i];n.push(t[1]);var o=0;for(i=0;i<n.length;i++){var r=n[i],s=n[i+(i+1<n.length?1:0)];o+=this.Distance(r,s)}var a=0;for(i=0;i<n.length;i++){r=n[i],s=n[i+(i+1<n.length?1:0)];var h=this.Distance(r,s);if(a+=h,a>=o/2){var c=a-o/2,l=c*Math.abs(r.X-s.X)/h,f=c*Math.abs(r.Y-s.Y)/h;l=s.X-r.X>0?-l:l,f=s.Y-r.Y>0?-f:f;var d=new u["a"](s.X+l,s.Y+f);if(Number.NaN!=d.X&&Number.NaN!=d.Y)return d}}return new u["a"](0,0)}},{key:"Fetch",value:function(t){this._id=t.ID,this.startPoint.X=t.StartPoint.X,this.startPoint.Y=t.StartPoint.Y,this.endPoint.X=t.EndPoint.X,this.endPoint.Y=t.EndPoint.Y,this.edittingPoint.X=t.EdittingPoint.X,this.edittingPoint.Y=t.EdittingPoint.Y,t.Title&&(this.title=t.Title),t.SourceCap&&(this.sourceCap=new y,this.sourceCap.Fetch(t.SourceCap)),t.TargetCap&&(this.targetCap=new y,this.targetCap.Fetch(t.TargetCap));for(var e=new d,n=0;n<t.Geometry.Figures.length;n++){var i=t.Geometry.Figures[n],o=new y;o.Fetch(i),e.Figures.push(o)}if(this.Geometry=e,this._selectionAdorner){var r=this._selectionAdorner;r.ResetCache()}}},{key:"Source",get:function(){return this.source},set:function(t){if(this.source!=t){var e=this.source;this.source=t,this.OnSourceChanged(e)}}},{key:"EdittingPoint",get:function(){return this.edittingPoint},set:function(t){this.edittingPoint.X==t.X&&this.edittingPoint.Y==t.Y||(this.edittingPoint.X=t.X,this.edittingPoint.Y=t.Y)}},{key:"Target",get:function(){return this.target},set:function(t){if(this.target!=t){var e=this.target;this.target=t,this.OnTargetChanged(e)}}},{key:"SourceConnectorPosition",get:function(){return this.sourceConnectorPosition},set:function(t){if(this.sourceConnectorPosition!=t){var e=this.sourceConnectorPosition;this.sourceConnectorPosition=t,this.OnSourceConnectorPositionChanged(t,e)}}},{key:"SourceConnectorResult",get:function(){return this.sourceConnectorResult},set:function(t){this.sourceConnectorResult=t}},{key:"Bounds",get:function(){return b.CreateByTwoPoint(this.startPoint,this.endPoint)}},{key:"Position",get:function(){return this.position},set:function(t){this.position=t}},{key:"Geometry",get:function(){return this.geometry},set:function(t){this.geometry!=t&&(this.geometry=t,this._cachedPath=null)}},{key:"Title",get:function(){return this.title},set:function(t){this.title!=t&&(this.title=t)}},{key:"SelectionAdorner",get:function(){return!this._selectionAdorner&&this.Surface&&(this._selectionAdorner=new T(this.Surface.Adorners,this)),this._selectionAdorner}},{key:"TargetConnectorPosition",get:function(){return this.targetConnectorPosition},set:function(t){if(this.targetConnectorPosition!=t){var e=this.targetConnectorPosition;this.targetConnectorPosition=t,this.OnTargetConnectorPositionChanged(t,e)}}},{key:"TargetConnectorResult",get:function(){return this.targetConnectorResult},set:function(t){this.targetConnectorResult=t}},{key:"StartPoint",get:function(){return this.startPoint},set:function(t){}},{key:"EndPoint",get:function(){return this.endPoint},set:function(t){}}]),e}(l["a"])},3458:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));n("7f7f");var i=n("d225"),o=n("b0b4"),r=n("978d"),s=function(){function t(){Object(i["a"])(this,t)}return Object(o["a"])(t,null,[{key:"IsCustom",value:function(t){return!1}},{key:"GetKnownOffset",value:function(e){var n=t.knownConnectors[e];if(n)return new r["a"](n[0],n[1]);throw new Error("Can not find known offset for: "+e)}}]),t}();s.Auto="Auto",s.Left="Left",s.Top="Top",s.Right="Right",s.Gliding="Gliding",s.Bottom="Bottom",s.knownConnectors={Auto:[.5,.5],Left:[0,.5],Right:[1,.5],Top:[.5,0],Bottom:[.5,1],Gliding:[.5,.5]}},"3c54":function(t,e,n){"use strict";var i=n("124e"),o=n.n(i);o.a},aa77:function(t,e,n){var i=n("5ca1"),o=n("be13"),r=n("79e5"),s=n("fdef"),a="["+s+"]",h="​",c=RegExp("^"+a+a+"*"),u=RegExp(a+a+"*$"),l=function(t,e,n){var o={},a=r((function(){return!!s[t]()||h[t]()!=h})),c=o[t]=a?e(f):s[t];n&&(o[n]=c),i(i.P+i.F*a,"String",o)},f=l.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(u,"")),t};t.exports=l},c34c:function(t,e,n){"use strict";var i,o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ex-splitter",{attrs:{size:300},on:{resize:t.onSplitterResize}},[n("div",{staticClass:"stage",style:{background:t.background},attrs:{slot:"panel1"},slot:"panel1"},[n("canvas",{ref:"surface",staticClass:"layer",staticStyle:{"z-index":"1"}}),n("canvas",{ref:"adorner",staticClass:"layer",staticStyle:{"z-index":"2"},on:{mousemove:function(e){return e.target!==e.currentTarget?null:t.onmousemove(e)},mousedown:function(e){return e.target!==e.currentTarget?null:t.onmousedown(e)},mouseup:function(e){return e.target!==e.currentTarget?null:t.onmouseup(e)}}})]),n("property-panel",{ref:"propertyPanel",attrs:{slot:"panel2"},slot:"panel2"})],1)},r=[],s=(n("ac4d"),n("8a81"),n("ac6a"),n("d225")),a=n("b0b4"),h=n("978d"),c=n("a374"),u=n("fe34"),l=n("2de8"),f=function(){function t(e){Object(s["a"])(this,t),this._moving=!1,this._surface=e,this._selectedItems=new Array}return Object(a["a"])(t,[{key:"SelectItem",value:function(t){if(null==t&&this._selectedItems.length>0)this._selectedItems.splice(0,this._selectedItems.length),this.OnSelectionChanged();else if(null!=t){if(1==this._selectedItems.length&&this._selectedItems[0]===t)return;this._selectedItems.splice(0,this._selectedItems.length),this._selectedItems.push(t),this.OnSelectionChanged()}}},{key:"SelectItems",value:function(t){var e=this;null==t&&this._selectedItems.length>0?(this._selectedItems.splice(0,this._selectedItems.length),this.OnSelectionChanged()):null!=t&&(this._selectedItems.splice(0,this._selectedItems.length),t.forEach((function(t){e._selectedItems.push(t)})),this.OnSelectionChanged())}},{key:"ClearSelection",value:function(){this.SelectItem(null),this._surface.ResetHoverItem()}},{key:"MoveSelection",value:function(t,e){if(this.SelectedItems.length>0){this._moving=!0;var n=!0,i=!1,o=void 0;try{for(var r,s=this._selectedItems[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var a=r.value;if(a instanceof l["a"]&&a.IsTableCell){var h=a.Cell.Row.Owner.Table;h.MoveCellSelection(t,e);break}a.Move(t,e)}}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}}}},{key:"OnMouseUp",value:function(t){if(this._moving){this._moving=!1;var e=!0,n=!1,i=void 0;try{for(var o,r=this._selectedItems[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var s=o.value;s.OnEndMove()}}catch(a){n=!0,i=a}finally{try{e||null==r.return||r.return()}finally{if(n)throw i}}}}},{key:"OnSelectionChanged",value:function(){this._surface.Adorners.ClearSelected();for(var t=0;t<this._selectedItems.length;t++){var e=this._selectedItems[t].SelectionAdorner;e&&this._surface.Adorners.Add(e)}this._surface.Adorners.Invalidate(),this._selectedItems.length>0?this._surface.PropertyPanel.setPropertyOwner(this._selectedItems[0]):this._surface.PropertyPanel.setPropertyOwner(this._surface.DesignService.RootDesigner)}},{key:"SelectedItems",get:function(){return this._selectedItems}}]),t}(),d=(n("6c7b"),function(){function t(e,n){Object(s["a"])(this,t),this._creationMode=i.None,this._canvas=n,this._surface=e,this._adorners=new Array}return Object(a["a"])(t,[{key:"ClearSelected",value:function(){for(var t=this._adorners.length-1;t>=0;t--)this._adorners[t].IsSelectionAdorner&&this._adorners.splice(t,1)}},{key:"Add",value:function(t){for(var e=0;e<this._adorners.length;e++)if(this._adorners[e]===t)return;this._adorners.push(t)}},{key:"HitTest",value:function(t){for(var e,n=new h["a"](0,0),i=null,o="",r=0;r<this._adorners.length;r++){e=this._adorners[r],n.X=e.Target.Bounds.X,n.Y=e.Target.Bounds.Y,e.Target.Parent&&(n=e.Target.Parent.PointToSurface(n)),n.X=t.X-n.X,n.Y=t.Y-n.Y;var s=e.HitTest(n);!0===s[0]&&(i=e,o=s[1])}return this._hitTestItem=i,this._canvas.style.cursor=i?o:"default",null!=i}},{key:"Invalidate",value:function(){var t=this._canvas.getContext("2d");if(t.clearRect(0,0,this._canvas.width,this._canvas.height),this._creationMode!=i.None||0!=this._adorners.length){var e=new h["a"](0,0),n=!0,o=!1,r=void 0;try{for(var s,a=this._adorners[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var c=s.value;e=c.Target.PointToSurface(new h["a"](0,0)),t.translate(e.X,e.Y),c.OnRender(t),t.translate(-e.X,-e.Y)}}catch(v){o=!0,r=v}finally{try{n||null==a.return||a.return()}finally{if(o)throw r}}if(this._creationMode==i.Item){var u=Math.min(this._x1,this._x2),l=Math.min(this._y1,this._y2),f=Math.max(this._x1,this._x2),d=Math.max(this._y1,this._y2);t.lineWidth=1,t.strokeStyle="black",t.strokeRect(u,l,f-u,d-l)}else this._creationMode==i.Connection&&this.DrawShapeConnectors(t)}}},{key:"DrawShapeConnectors",value:function(t){if(this.nearestShapes)for(var e,n,i=0;i<this.nearestShapes.length;i++){e=this.nearestShapes[i];for(var o=4,r=0,s=0,a=0;a<e.Connectors.length;a++){n=e.Connectors[a],r=n.AbsolutePosition.X-o,s=n.AbsolutePosition.Y-o;var h=n===this.ActiveConnector?"red":"white";t.beginPath(),t.arc(r+o,s+o,o,0,360),t.fillStyle=h,t.fill(),t.lineWidth=1,t.strokeStyle="red",t.stroke()}}}},{key:"OnMouseUp",value:function(t){if(this._hitTestItem&&this._hitTestItem.OnMouseUp(t),this.nearestShapes=null,this.Invalidate(),this.ActiveConnector){var e=this._hitTestItem;if(null!=e)e.Target,e.ActiveEditPoint;this.ActiveConnector=null}}},{key:"BeginCreation",value:function(t,e,n){this._creationMode=n?i.Connection:i.Item,this._x1=this._x2=t,this._y1=this._y2=e}},{key:"UpdateCreationEndPoint",value:function(t,e){this._x2=t,this._y2=e,this.Invalidate()}},{key:"EndCreation",value:function(){this._creationMode=i.None}},{key:"UpdateNearestShapes",value:function(t){var e=null==this.nearestShapes?0:this.nearestShapes.length,n=null==t?0:t.length;this.nearestShapes=t,0==n&&(this.ActiveConnector=null),e!=n&&this.Invalidate()}},{key:"Canvas",get:function(){return this._canvas}},{key:"HitTestItem",get:function(){return this._hitTestItem}},{key:"CreationStartPoint",get:function(){return new h["a"](this._x1,this._y1)}},{key:"CreationEndPoint",get:function(){return new h["a"](this._x2,this._y2)}},{key:"CreationRectangle",get:function(){var t=Math.min(this._x1,this._x2),e=Math.min(this._y1,this._y2),n=Math.max(this._x1,this._x2),i=Math.max(this._y1,this._y2);return new c["a"](t,e,n-t,i-e)}}]),t}());(function(t){t[t["None"]=0]="None",t[t["Connection"]=1]="Connection",t[t["Item"]=2]="Item"})(i||(i={}));var v=n("2f49"),g=function(){function t(e){Object(s["a"])(this,t),this._surface=e}return Object(a["a"])(t,[{key:"BeginCreation",value:function(t,e){this._currentContainer=this._surface.GetContainerUnderMouse(t,e),this._surface.SelectionService.ClearSelection(),this._surface.Adorners.BeginCreation(t,e,this.SelectedItem.IsConnection),this._surface.Adorners.Canvas.style.cursor="crosshair"}},{key:"OnMouseMove",value:function(t,e){this._surface.Adorners.UpdateCreationEndPoint(t,e)}},{key:"EndCreation",value:function(t,e){if(this._surface.Adorners.EndCreation(),this._currentContainer){var n=this.SelectedItem.Create(this._currentContainer),i=this._currentContainer.PointToSurface(new h["a"](0,0));if(n instanceof v["a"]){var o=this._surface.Adorners.CreationStartPoint,r=this._surface.Adorners.CreationEndPoint;n.StartPoint=new h["a"](o.X-i.X,o.Y-i.Y),n.EndPoint=new h["a"](r.X-i.X,r.Y-i.Y)}else{var s=this._surface.Adorners.CreationRectangle;s.X-=i.X,s.Y-=i.Y,n.Bounds=s}this._currentContainer.AddItem(n,!0),this._surface.SelectionService.SelectItem(n)}else{var a=this.SelectedItem.Create(this._surface);a instanceof v["a"]?(a.StartPoint=this._surface.Adorners.CreationStartPoint,a.EndPoint=this._surface.Adorners.CreationEndPoint):a.Bounds=this._surface.Adorners.CreationRectangle,this._surface.AddItem(a,!0),this._surface.SelectionService.SelectItem(a)}this._surface.Adorners.Canvas.style.cursor="",this.Toolbox&&(this.Toolbox.SelectedItem=null)}},{key:"Toolbox",get:function(){return this._toolbox},set:function(t){this._toolbox=t}},{key:"SelectedItem",get:function(){return this.Toolbox?this.Toolbox.SelectedItem:null}}]),t}(),y=function(){function t(e,n,i,o){Object(s["a"])(this,t),this._ratio=i,this._canvas=e,this._propertyPanel=o,this.Adorners=new d(this,n),this.ToolboxService=new g(this),this.SelectionService=new f(this),this.ScaleCanvas(e,e.width,e.height,i),this.ScaleCanvas(n,n.width,n.height,i)}return Object(a["a"])(t,[{key:"ScaleCanvas",value:function(t,e,n,i){if(1!==i){t.width=e*i,t.height=n*i,t.style.width=e+"px",t.style.height=n+"px";var o=t.getContext("2d");o.scale(i,i)}}},{key:"OnResize",value:function(t,e){1!==this._ratio&&(this.ScaleCanvas(this._canvas,t,e,this._ratio),this.ScaleCanvas(this.Adorners.Canvas,t,e,this._ratio)),this.Invalidate()}},{key:"AddItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._items||(this._items=new Array),t.Surface=this,this._items.push(t),t.OnAddToSurface(e)}},{key:"RemoveItem",value:function(t){t.OnRemoveFromSurface(),t.Surface=null;var e=this._items.indexOf(t);this._items.splice(e,1)}},{key:"GetRenderingContext",value:function(){return this._canvas.getContext("2d")}},{key:"Invalidate",value:function(t){var e;e=t||new c["a"](0,0,this._canvas.width/this._ratio,this._canvas.height/this._ratio);var n=this._canvas.getContext("2d");if(n.clearRect(e.X,e.Y,e.Width,e.Height),this._items){var i=!0,o=!1,r=void 0;try{for(var s,a=this._items[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var h=s.value;if(h.Visible&&e.IntersectsWith(h.Bounds)){var u=h.Bounds.X,l=h.Bounds.Y;n.translate(u,l),h.Paint(n),n.translate(-u,-l)}}}catch(f){o=!0,r=f}finally{try{i||null==a.return||a.return()}finally{if(o)throw r}}}this.Adorners.Invalidate()}},{key:"OnMouseDown",value:function(t){this._hoverItem&&this._hoverItem.PreviewMouseDown(t)||null==this.Adorners.HitTestItem&&(t.Button==u["a"].Left&&this.ToolboxService.SelectedItem?this.ToolboxService.BeginCreation(t.X,t.Y):this.SelectionService.SelectItem(this._hoverItem))}},{key:"OnMouseMove",value:function(t){t.Button===u["a"].None&&this.Adorners.HitTest(new h["a"](t.X,t.Y))||(t.Button===u["a"].Left&&(this.Adorners.HitTestItem?this.Adorners.HitTestItem.OnMouseMove(t):this.ToolboxService.SelectedItem?this.ToolboxService.OnMouseMove(t.X,t.Y):this.SelectionService.MoveSelection(t.DeltaX,t.DeltaY)),this.FindHoverItemOnMouseMove(t))}},{key:"OnMouseUp",value:function(t){t.Button===u["a"].Left&&(this.ToolboxService.SelectedItem&&this.ToolboxService.EndCreation(t.X,t.Y),this.Adorners.OnMouseUp(t),this.SelectionService.OnMouseUp(t))}},{key:"FindHoverItemOnMouseMove",value:function(t){var e=this._canvas.getContext("2d");if(this._hoverItem){var n=this._hoverItem.PointToSurface(new h["a"](0,0)),i=t.X-n.X,o=t.Y-n.Y;if(this._hoverItem.HitTest(i,o,e))return void(this._hoverItem.IsContainer&&(this._hoverItem=this._hoverItem.FindHoverItem(new h["a"](i,o),e)))}this._hoverItem=this.GetItemUnderMouse(t.X,t.Y,e)}},{key:"GetItemUnderMouse",value:function(t,e,n){var i=null;if(this._items)for(var o=0;o<this._items.length;o++){var r=this._items[o],s=t-r.Bounds.X,a=e-r.Bounds.Y;r.Visible&&r.HitTest(s,a,n)&&(i=r,i.IsContainer&&(i=i.FindHoverItem(new h["a"](s,a),n)))}return i}},{key:"GetContainerUnderMouse",value:function(t,e){var n=this._canvas.getContext("2d"),i=this.GetItemUnderMouse(t,e,n);while(i){if(i.IsContainer)return i;i=i.Parent}return null}},{key:"ResetHoverItem",value:function(){this._hoverItem=null}},{key:"PropertyPanel",get:function(){return this._propertyPanel}},{key:"Items",get:function(){return this._items}},{key:"PixelRatio",get:function(){return this._ratio}}]),t}(),C=function t(e,n,i,o,r,a){Object(s["a"])(this,t),this.Button=e,this.Clicks=n,this.X=i,this.Y=o,this.DeltaX=r,this.DeltaY=a},_=n("eb37"),S={components:{PropertyPanel:_["a"]},props:{background:{type:String,default:"white"}},data:function(){return{designSurface:null,pixelRatio:1}},methods:{onmousemove:function(t){var e=t.movementX,n=t.movementY;if(0!==e||0!==n){var i=new C(t.buttons,0,t.layerX,t.layerY,e,n);this.designSurface.OnMouseMove(i)}},onmousedown:function(t){var e=new C(t.buttons,0,t.layerX,t.layerY,0,0);this.designSurface.OnMouseDown(e)},onmouseup:function(t){var e=0;0===t.button&&(e=1);var n=new C(e,0,t.layerX,t.layerY,0,0);this.designSurface.OnMouseUp(n)},onSplitterResize:function(t){var e=this.$children[0].panel1Size,n=this.$children[0].height;this.$refs.surface.width=this.$refs.adorner.width=e,this.$refs.surface.height=this.$refs.adorner.height=n,this.designSurface?this.designSurface.OnResize(t,n):(this.designSurface=new y(this.$refs.surface,this.$refs.adorner,this.pixelRatio,this.$refs.propertyPanel),this.$emit("ready"))}},mounted:function(){this.pixelRatio=window.devicePixelRatio||1}},m=S,P=(n("1160"),n("2877")),p=Object(P["a"])(m,o,r,!1,null,"1956b996",null);e["a"]=p.exports},c5f6:function(t,e,n){"use strict";var i=n("7726"),o=n("69a8"),r=n("2d95"),s=n("5dbc"),a=n("6a99"),h=n("79e5"),c=n("9093").f,u=n("11e9").f,l=n("86cc").f,f=n("aa77").trim,d="Number",v=i[d],g=v,y=v.prototype,C=r(n("2aeb")(y))==d,_="trim"in String.prototype,S=function(t){var e=a(t,!1);if("string"==typeof e&&e.length>2){e=_?e.trim():f(e,3);var n,i,o,r=e.charCodeAt(0);if(43===r||45===r){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===r){switch(e.charCodeAt(1)){case 66:case 98:i=2,o=49;break;case 79:case 111:i=8,o=55;break;default:return+e}for(var s,h=e.slice(2),c=0,u=h.length;c<u;c++)if(s=h.charCodeAt(c),s<48||s>o)return NaN;return parseInt(h,i)}}return+e};if(!v(" 0o1")||!v("0b1")||v("+0x1")){v=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof v&&(C?h((function(){y.valueOf.call(n)})):r(n)!=d)?s(new g(S(e)),n,v):S(e)};for(var m,P=n("9e1e")?c(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),p=0;P.length>p;p++)o(g,m=P[p])&&!o(v,m)&&l(v,m,u(g,m));v.prototype=y,y.constructor=v,n("2aba")(i,d,v)}},e0ee:function(t,e,n){},eb37:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ide-property-panel"},[n("h4",{staticClass:"propertyPanel-title"},[t._v(t._s(t.ownerType))]),n("el-collapse",{staticClass:"ide-property-collapse",attrs:{value:t.expands}},t._l(t.catalogs,(function(e){return n("el-collapse-item",{key:e.name,attrs:{title:e.name,name:e.name}},[n("el-form",{attrs:{"label-position":"right",size:"mini","label-width":"120px"}},t._l(e.items,(function(t){return n("el-form-item",{key:t.title,attrs:{label:t.title+":"}},[n(t.editor,{ref:"editors",refInFor:!0,tag:"component",attrs:{target:t}})],1)})),1)],1)})),1)],1)},o=[],r=(n("7f7f"),n("ac4d"),n("8a81"),n("ac6a"),{data:function(){return{ownerType:"",expands:[],catalogs:[],DesignService:null}},methods:{setPropertyOwner:function(t){if(!t)return this.ownerType="",this.expands=[],void(this.catalogs=[]);this.ownerType=t.getPropertyOwnerType();var e=t.getPropertyItems();if(e){this.expands.splice(0,this.expands.length);var n=!0,i=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var a=r.value;this.expands.push(a.name);var h=!0,c=!1,u=void 0;try{for(var l,f=a.items[Symbol.iterator]();!(h=(l=f.next()).done);h=!0){var d=l.value;d.editor=this.DesignService.GetPropertyEditor(d.editor)}}catch(v){c=!0,u=v}finally{try{h||null==f.return||f.return()}finally{if(c)throw u}}}}catch(v){i=!0,o=v}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}this.catalogs=e}else this.catalogs=[]},refreshProperty:function(t){var e=!0,n=!1,i=void 0;try{for(var o,r=this.$refs.editors[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var s=o.value;if(s.target.title===t)return void s.refresh()}}catch(a){n=!0,i=a}finally{try{e||null==r.return||r.return()}finally{if(n)throw i}}console.warn("Can't find Property: "+t)}}}),s=r,a=(n("3c54"),n("2877")),h=Object(a["a"])(s,i,o,!1,null,"12567738",null);e["a"]=h.exports},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);