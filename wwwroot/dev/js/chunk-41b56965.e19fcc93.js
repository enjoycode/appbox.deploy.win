(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41b56965"],{"0293":function(t,e,n){var i=n("241e"),s=n("53e2");n("ce7e")("getPrototypeOf",(function(){return function(t){return s(i(t))}}))},"061b":function(t,e,n){t.exports=n("fa99")},"07c9":function(t,e,n){},1102:function(t,e,n){"use strict";var i=n("07c9"),s=n.n(i);s.a},1771:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));n("6b54");var i=n("d225"),s=n("b0b4"),r=n("a374"),o=n("978d"),a=n("b7c5"),h=n("662f"),u=n("1fb1"),c=n("8500"),l=function(){function t(){Object(i["a"])(this,t),this._id=-1,this._selectionAdorner=null}return Object(s["a"])(t,[{key:"PointToSurface",value:function(t){var e=t.X,n=t.Y,i=this;while(null!=i)e+=i.Bounds.X,n+=i.Bounds.Y,i=i.Parent;return new o["a"](e,n)}},{key:"PointToClient",value:function(t){var e=this.PointToSurface(new o["a"](0,0));return new o["a"](t.X-e.X,t.Y-e.Y)}},{key:"Move",value:function(t,e){if(0!==(this.Behavior&c["a"].CanMove)){if(null!=this.Parent){var n=new r["a"](this.Bounds.X+t,this.Bounds.Y+e,this.Bounds.Width,this.Bounds.Height);if(n.Y+10>=this.Parent.Bounds.Height)return;if(n.X+10>=this.Parent.Bounds.Width)return;if(n.X+n.Width<=10)return;if(n.Y+n.Height<=10)return}this.SetBounds(this.Bounds.X+t,this.Bounds.Y+e,this.Bounds.Width,this.Bounds.Height,a["a"].Location)}}},{key:"OnEndMove",value:function(){0!==(this.Behavior&c["a"].CanMove)&&this.Surface&&this.Surface.DesignService&&this.Surface.DesignService.ChangeProperty(this,"Move",this.Bounds.X,this.Bounds.Y)}},{key:"Resize",value:function(t,e,n){if(this.Behavior&c["a"].CanResize){var i=new r["a"](this.Bounds.X,this.Bounds.Y,this.Bounds.Width,this.Bounds.Height),s=a["a"].All;switch(t){case u["a"].LeftTop:if(i.Height-n<=0||i.Width-e<=0)break;i.X+=e,i.Y+=n,i.Width-=e,i.Height-=n;break;case u["a"].LeftCenter:if(i.Width-e<=0)break;i.X+=e,i.Width-=e;break;case u["a"].LeftBottom:if(i.Height+n<=0||i.Width-e<=0)break;i.X+=e,i.Width-=e,i.Height+=n;break;case u["a"].RightTop:if(i.Height-n<=0||i.Width+e<=0)break;i.Y+=n,i.Width+=e,i.Height-=n;break;case u["a"].RightCenter:if(i.Width+e<=0)break;i.Width+=e;break;case u["a"].RightBottom:if(i.Height+n<=0||i.Width+e<=0)break;i.Width+=e,i.Height+=n;break;case u["a"].TopCenter:if(i.Height-n<=0)break;i.Y+=n,i.Height-=n,s=a["a"].Height;break;case u["a"].BottomCenter:if(i.Height+n<=0)break;i.Height+=n,s=a["a"].Height;break;default:break}this.SetBounds(i.X,i.Y,i.Width,i.Height,s)}}},{key:"OnEndResize",value:function(){this.Behavior&c["a"].CanResize&&this.Surface&&this.Surface.DesignService&&this.Surface.DesignService.ChangeProperty(this,"Resize",this.Bounds.Width,this.Bounds.Height)}},{key:"OnAddToSurface",value:function(){}},{key:"OnRemoveFromSurface",value:function(){}},{key:"Invalidate",value:function(){if(this.Parent)this.Parent.Invalidate();else if(this.Surface){var t=this.PointToSurface(new o["a"](0,0)),e=new r["a"](t.X,t.Y,this.Bounds.Width,this.Bounds.Height);this.Surface.Invalidate(e)}}},{key:"InvalidateOnBoundsChanged",value:function(t){if(this.Surface){var e=null==this.Parent?new o["a"](0,0):this.Parent.PointToSurface(new o["a"](0,0)),n=r["a"].Union(t,this.Bounds);n.X+=e.X,n.Y+=e.Y,n.Inflate(1,1),this.Surface.Invalidate(n)}}},{key:"PreviewMouseDown",value:function(t){return!1}},{key:"HitTest",value:function(t,e,n){return t>=0&&t<=this.Bounds.Width&&e>=0&&e<=this.Bounds.Height}},{key:"AddItem",value:function(t){if(!this.IsContainer)throw new Error("非容器元素不能添加子元素");t.Parent=this,this._items||(this._items=new Array),this._items.push(t),t.OnAddToSurface(),this.Invalidate()}},{key:"RemoveItem",value:function(t){if(!this.IsContainer)throw new Error("非容器元素不能删除子元素");t.OnRemoveFromSurface(),t.Parent=null;var e=this._items.indexOf(t);this._items.splice(e,1),this.Invalidate()}},{key:"FindHoverItem",value:function(t,e){var n=null;if(this._items)for(var i=0;i<this._items.length;i++){var s=this._items[i],r=t.X-s.Bounds.X,a=t.Y-s.Bounds.Y;s.Visible&&s.HitTest(r,a,e)&&(n=s,n.IsContainer&&(n=n.FindHoverItem(new o["a"](r,a),e)))}return null==n?this:n}},{key:"Fetch",value:function(t){}},{key:"getPropertyItems",value:function(){return null}},{key:"getPropertyOwnerType",value:function(){var t=/function (.{1,})\(/,e=t.exec(this.constructor.toString());return e&&e.length>1?e[1]:""}},{key:"ID",get:function(){return this._id}},{key:"Behavior",get:function(){return c["a"].CanMove|c["a"].CanResize}},{key:"Surface",get:function(){return this.Parent?this.Parent.Surface:this._surface},set:function(t){this._surface=t}},{key:"Visible",get:function(){return!0}},{key:"IsContainer",get:function(){return!1}},{key:"Items",get:function(){return this._items}},{key:"SelectionAdorner",get:function(){return!this._selectionAdorner&&this.Surface&&(this._selectionAdorner=new h["a"](this.Surface.Adorners,this)),this._selectionAdorner}},{key:"Location",get:function(){return new o["a"](this.Bounds.X,this.Bounds.Y)},set:function(t){this.SetBounds(t.X,t.Y,this.Bounds.Width,this.Bounds.Height,a["a"].Location)}}]),t}()},"1cb7":function(t,e,n){var i=n("bf0b"),s=n("53e2"),r=n("07e3"),o=n("63b6"),a=n("f772"),h=n("e4ae");function u(t,e){var n,o,c=arguments.length<3?t:arguments[2];return h(t)===c?t[e]:(n=i.f(t,e))?r(n,"value")?n.value:void 0!==n.get?n.get.call(c):void 0:a(o=s(t))?u(o,e,c):void 0}o(o.S,"Reflect",{get:u})},"1df8":function(t,e,n){var i=n("63b6");i(i.S,"Object",{setPrototypeOf:n("ead6").set})},"1fb1":function(t,e,n){"use strict";var i;(function(t){t[t["None"]=0]="None",t[t["LeftTop"]=1]="LeftTop",t[t["LeftCenter"]=2]="LeftCenter",t[t["LeftBottom"]=3]="LeftBottom",t[t["TopCenter"]=4]="TopCenter",t[t["BottomCenter"]=5]="BottomCenter",t[t["RightTop"]=6]="RightTop",t[t["RightCenter"]=7]="RightCenter",t[t["RightBottom"]=8]="RightBottom"})(i||(i={})),e["a"]=i},"25b0":function(t,e,n){n("1df8"),t.exports=n("584a").Object.setPrototypeOf},"268f":function(t,e,n){t.exports=n("fde4")},"2a88":function(t,e,n){"use strict";var i=n("268f"),s=n.n(i),r=n("8feb"),o=n.n(r),a=n("6bb5");function h(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=Object(a["a"])(t),null===t)break;return t}function u(t,e,n){return u="undefined"!==typeof Reflect&&o.a?o.a:function(t,e,n){var i=h(t,e);if(i){var r=s()(i,e);return r.get?r.get.call(n):r.value}},u(t,e,n||t)}n.d(e,"a",(function(){return u}))},"2de8":function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var i=n("d225"),s=n("b0b4"),r=n("308d"),o=n("6bb5"),a=n("4e2b"),h=n("662f"),u=n("1771"),c=n("a374"),l=n("b7c5"),f=n("8500"),d=n("fe34"),v=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(r["a"])(this,Object(o["a"])(e).apply(this,arguments)),t._bounds=new c["a"](0,0,0,0),t}return Object(a["a"])(e,t),Object(s["a"])(e,[{key:"SetBounds",value:function(t,e,n,i,s){if(!this.IsTableCell){var r=new c["a"](this._bounds.X,this._bounds.Y,this._bounds.Width,this._bounds.Height);this._bounds.X=t,this._bounds.Y=e,this._bounds.Width=n,this._bounds.Height=i,this.InvalidateOnBoundsChanged(r)}}},{key:"Fetch",value:function(t){this._id=t.ID,this._bounds.X=t.Bounds.X,this._bounds.Y=t.Bounds.Y,this._bounds.Width=t.Bounds.Width,this._bounds.Height=t.Bounds.Height;var e=t;e.Cell&&(this._cell=e.Cell)}},{key:"PreviewMouseDown",value:function(t){if(t.Button==d["a"].Left&&this.IsTableCell){if(null==this.Parent)return!1;var e=this.Parent;null!=e&&e.BeginCellSelection(t.X,t.Y)}return!1}},{key:"IsTableCell",get:function(){return null!=this._cell}},{key:"Cell",get:function(){return this._cell}},{key:"SelectionAdorner",get:function(){if(this.IsTableCell){var t=this.Parent;return t.CellSelectionAdorner}return!this._selectionAdorner&&this.Surface&&(this._selectionAdorner=new h["a"](this.Surface.Adorners,this)),this._selectionAdorner}},{key:"Behavior",get:function(){return this.IsTableCell?f["a"].None:f["a"].CanMove|f["a"].CanResize}},{key:"Bounds",get:function(){return this._bounds},set:function(t){this.SetBounds(t.X,t.Y,t.Width,t.Height,l["a"].All)}}]),e}(u["a"])},"308d":function(t,e,n){"use strict";var i=n("7618");function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r(t,e){return!e||"object"!==Object(i["a"])(e)&&"function"!==typeof e?s(t):e}n.d(e,"a",(function(){return r}))},"36bd":function(t,e,n){"use strict";var i=n("4bf8"),s=n("77f1"),r=n("9def");t.exports=function(t){var e=i(this),n=r(e.length),o=arguments.length,a=s(o>1?arguments[1]:void 0,n),h=o>2?arguments[2]:void 0,u=void 0===h?n:s(h,n);while(u>a)e[a++]=t;return e}},4910:function(t,e,n){n("1cb7"),t.exports=n("584a").Reflect.get},"4aa6":function(t,e,n){t.exports=n("dc62")},"4d16":function(t,e,n){t.exports=n("25b0")},"4e2b":function(t,e,n){"use strict";var i=n("4aa6"),s=n.n(i),r=n("4d16"),o=n.n(r);function a(t,e){return a=o.a||function(t,e){return t.__proto__=e,t},a(t,e)}function h(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=s()(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}n.d(e,"a",(function(){return h}))},"662f":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("d225"),s=n("b0b4"),r=n("308d"),o=n("6bb5"),a=n("4e2b"),h=n("fe0c"),u=n("a374"),c=n("1fb1"),l=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(r["a"])(this,Object(o["a"])(e).apply(this,arguments)),t.anchorSize=6,t.anchorLocation=c["a"].None,t}return Object(a["a"])(e,t),Object(s["a"])(e,[{key:"OnRender",value:function(t){t.strokeStyle="darkgray",t.lineWidth=2,t.strokeRect(-3,-3,this.Target.Bounds.Width+6,this.Target.Bounds.Height+6),this.DrawAnchor(t,this.LeftTop),this.DrawAnchor(t,this.LeftCenter),this.DrawAnchor(t,this.LeftBottom),this.DrawAnchor(t,this.RightTop),this.DrawAnchor(t,this.RightCenter),this.DrawAnchor(t,this.RightBottom),this.DrawAnchor(t,this.TopCenter),this.DrawAnchor(t,this.BottomCenter)}},{key:"DrawAnchor",value:function(t,e){t.fillStyle="white",t.fillRect(e.X,e.Y,e.Width,e.Height),t.strokeStyle="black",t.lineWidth=1,t.strokeRect(e.X,e.Y,e.Width,e.Height)}},{key:"HitTest",value:function(t){var e="";return this.LeftTop.Contains(t.X,t.Y)?(this.anchorLocation=c["a"].LeftTop,e="nw-resize"):this.LeftCenter.Contains(t.X,t.Y)?(this.anchorLocation=c["a"].LeftCenter,e="w-resize"):this.LeftBottom.Contains(t.X,t.Y)?(this.anchorLocation=c["a"].LeftBottom,e="sw-resize"):this.RightTop.Contains(t.X,t.Y)?(this.anchorLocation=c["a"].RightTop,e="ne-resize"):this.RightCenter.Contains(t.X,t.Y)?(this.anchorLocation=c["a"].RightCenter,e="e-resize"):this.RightBottom.Contains(t.X,t.Y)?(this.anchorLocation=c["a"].RightBottom,e="se-resize"):this.TopCenter.Contains(t.X,t.Y)?(this.anchorLocation=c["a"].TopCenter,e="n-resize"):this.BottomCenter.Contains(t.X,t.Y)?(this.anchorLocation=c["a"].BottomCenter,e="s-resize"):this.anchorLocation=c["a"].None,this.anchorLocation!=c["a"].None?[!0,e]:[!1,e]}},{key:"OnMouseMove",value:function(t){this.Target.Resize(this.anchorLocation,t.DeltaX,t.DeltaY)}},{key:"OnMouseUp",value:function(t){this.Target.OnEndResize()}},{key:"LeftTop",get:function(){return new u["a"](-this.anchorSize,-this.anchorSize,this.anchorSize,this.anchorSize)}},{key:"LeftCenter",get:function(){return new u["a"](-this.anchorSize,(this.Target.Bounds.Height-this.anchorSize)/2,this.anchorSize,this.anchorSize)}},{key:"LeftBottom",get:function(){return new u["a"](-this.anchorSize,this.Target.Bounds.Height,this.anchorSize,this.anchorSize)}},{key:"RightTop",get:function(){return new u["a"](this.Target.Bounds.Width,-this.anchorSize,this.anchorSize,this.anchorSize)}},{key:"RightCenter",get:function(){return new u["a"](this.Target.Bounds.Width,(this.Target.Bounds.Height-this.anchorSize)/2,this.anchorSize,this.anchorSize)}},{key:"RightBottom",get:function(){return new u["a"](this.Target.Bounds.Width,this.Target.Bounds.Height,this.anchorSize,this.anchorSize)}},{key:"TopCenter",get:function(){return new u["a"]((this.Target.Bounds.Width-this.anchorSize)/2,-this.anchorSize,this.anchorSize,this.anchorSize)}},{key:"BottomCenter",get:function(){return new u["a"]((this.Target.Bounds.Width-this.anchorSize)/2,this.Target.Bounds.Height,this.anchorSize,this.anchorSize)}}]),e}(h["a"])},"6bb5":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("061b"),s=n.n(i),r=n("4d16"),o=n.n(r);function a(t){return a=o.a?s.a:function(t){return t.__proto__||s()(t)},a(t)}},"6c7b":function(t,e,n){var i=n("5ca1");i(i.P,"Array",{fill:n("36bd")}),n("9c6c")("fill")},8500:function(t,e,n){"use strict";var i;(function(t){t[t["None"]=0]="None",t[t["CanMove"]=1]="CanMove",t[t["CanResize"]=2]="CanResize"})(i||(i={})),e["a"]=i},8828:function(t,e,n){"use strict";var i=n("c16a"),s=n.n(i);s.a},"8feb":function(t,e,n){t.exports=n("4910")},9427:function(t,e,n){var i=n("63b6");i(i.S,"Object",{create:n("a159")})},"978d":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("d225"),s=n("b0b4"),r=function(){function t(e,n){Object(i["a"])(this,t),this.X=e,this.Y=n}return Object(s["a"])(t,[{key:"toString",value:function(){return"{"+this.X+", "+this.Y+"}"}}],[{key:"Distance",value:function(t,e){return Math.sqrt(Math.pow(t.X-e.X,2)+Math.pow(t.Y-e.Y,2))}}]),t}()},a374:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("d225"),s=n("b0b4"),r=function(){function t(e,n,s,r){Object(i["a"])(this,t),this.X=e,this.Y=n,this.Width=s,this.Height=r}return Object(s["a"])(t,[{key:"Inflate",value:function(t,e){this.X-=t,this.Y-=e,this.Width+=2*t,this.Height+=2*e}},{key:"IntersectsWith",value:function(t){return!(this.X>=t.Right||this.Right<=t.X||this.Y>=t.Bottom||this.Bottom<=t.Y)}},{key:"Contains",value:function(t,e){return t>=this.X&&t<this.Right&&e>=this.Y&&e<this.Bottom}},{key:"Right",get:function(){return this.X+this.Width}},{key:"Bottom",get:function(){return this.Y+this.Height}}],[{key:"Union",value:function(e,n){var i=Math.min(e.X,n.X),s=Math.min(e.Y,n.Y),r=Math.max(e.Right,n.Right),o=Math.max(e.Bottom,n.Bottom);return new t(i,s,r-i,o-s)}}]),t}()},b7c5:function(t,e,n){"use strict";var i;(function(t){t[t["None"]=0]="None",t[t["X"]=1]="X",t[t["Y"]=2]="Y",t[t["Location"]=3]="Location",t[t["Width"]=4]="Width",t[t["Height"]=8]="Height",t[t["Size"]=12]="Size",t[t["All"]=15]="All"})(i||(i={})),e["a"]=i},bf90:function(t,e,n){var i=n("36c3"),s=n("bf0b").f;n("ce7e")("getOwnPropertyDescriptor",(function(){return function(t,e){return s(i(t),e)}}))},c16a:function(t,e,n){},c34c:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ex-splitter",{attrs:{size:300},on:{resize:t.onSplitterResize}},[n("div",{ref:"stage",staticClass:"stage",style:{background:t.background},attrs:{slot:"panel1"},slot:"panel1"},[n("canvas",{ref:"surface",staticClass:"layer",staticStyle:{"z-index":"1"}}),n("canvas",{ref:"adorner",staticClass:"layer",staticStyle:{"z-index":"2"},on:{mousemove:function(e){return e.target!==e.currentTarget?null:t.onmousemove(e)},mousedown:function(e){return e.target!==e.currentTarget?null:t.onmousedown(e)},mouseup:function(e){return e.target!==e.currentTarget?null:t.onmouseup(e)}}})]),n("property-panel",{ref:"propertyPanel",attrs:{slot:"panel2"},slot:"panel2"})],1)},s=[],r=n("d225"),o=n("b0b4"),a=n("978d"),h=n("a374"),u=n("fe34"),c=(n("ac6a"),n("2de8")),l=function(){function t(e){Object(r["a"])(this,t),this._moving=!1,this._surface=e,this._selectedItems=new Array}return Object(o["a"])(t,[{key:"SelectItem",value:function(t){if(null==t&&this._selectedItems.length>0)this._selectedItems.splice(0,this._selectedItems.length),this.OnSelectionChanged();else if(null!=t){if(1==this._selectedItems.length&&this._selectedItems[0]===t)return;this._selectedItems.splice(0,this._selectedItems.length),this._selectedItems.push(t),this.OnSelectionChanged()}}},{key:"SelectItems",value:function(t){var e=this;null==t&&this._selectedItems.length>0?(this._selectedItems.splice(0,this._selectedItems.length),this.OnSelectionChanged()):null!=t&&(this._selectedItems.splice(0,this._selectedItems.length),t.forEach((function(t){e._selectedItems.push(t)})),this.OnSelectionChanged())}},{key:"MoveSelection",value:function(t,e){if(this.SelectedItems.length>0){this._moving=!0;for(var n=0;n<this._selectedItems.length;n++){if(this._selectedItems[n]instanceof c["a"]){var i=this._selectedItems[n];if(i.IsTableCell){var s=i.Parent;s.MoveCellSelection(t,e);break}}this._selectedItems[n].Move(t,e)}}}},{key:"OnMouseUp",value:function(t){if(this._moving){this._moving=!1;for(var e=0;e<this._selectedItems.length;e++)this._selectedItems[e].OnEndMove()}}},{key:"OnSelectionChanged",value:function(){this._surface.Adorners.ClearSelected();for(var t=0;t<this._selectedItems.length;t++){var e=this._selectedItems[t].SelectionAdorner;e&&this._surface.Adorners.Add(e)}this._surface.Adorners.Invalidate(),this._selectedItems.length>0?this._surface.PropertyPanel.setPropertyOwner(this._selectedItems[0]):this._surface.PropertyPanel.setPropertyOwner(this._surface.DesignService.RootDesigner)}},{key:"SelectedItems",get:function(){return this._selectedItems}}]),t}(),f=(n("6c7b"),function(){function t(e,n){Object(r["a"])(this,t),this._canvas=n,this._surface=e,this._adorners=new Array}return Object(o["a"])(t,[{key:"ClearSelected",value:function(){for(var t=this._adorners.length-1;t>=0;t--)this._adorners[t].IsSelectionAdorner&&this._adorners.splice(t,1)}},{key:"Add",value:function(t){for(var e=0;e<this._adorners.length;e++)if(this._adorners[e]===t)return;this._adorners.push(t)}},{key:"HitTest",value:function(t){for(var e,n=new a["a"](0,0),i=null,s="",r=0;r<this._adorners.length;r++){e=this._adorners[r],n.X=e.Target.Bounds.X,n.Y=e.Target.Bounds.Y,e.Target.Parent&&(n=e.Target.Parent.PointToSurface(n)),n.X=t.X-n.X,n.Y=t.Y-n.Y;var o=e.HitTest(n);!0===o[0]&&(i=e,s=o[1])}return this._hitTestItem=i,this._canvas.style.cursor=i?s:"default",null!=i}},{key:"Invalidate",value:function(){var t,e=this._canvas.getContext("2d");e.clearRect(0,0,this._canvas.width,this._canvas.height);for(var n=new a["a"](0,0),i=0;i<this._adorners.length;i++)t=this._adorners[i],n=t.Target.PointToSurface(new a["a"](0,0)),e.translate(n.X,n.Y),t.OnRender(e),e.translate(-n.X,-n.Y);this.DrawShapeConnectors(e)}},{key:"DrawShapeConnectors",value:function(t){if(this.nearestShapes)for(var e,n,i=0;i<this.nearestShapes.length;i++){e=this.nearestShapes[i];for(var s=4,r=0,o=0,a=0;a<e.Connectors.length;a++){n=e.Connectors[a],r=n.AbsolutePosition.X-s,o=n.AbsolutePosition.Y-s;var h=n===this.ActiveConnector?"red":"white";t.beginPath(),t.arc(r+s,o+s,s,0,360),t.fillStyle=h,t.fill(),t.lineWidth=1,t.strokeStyle="red",t.stroke()}}}},{key:"OnMouseUp",value:function(t){if(this._hitTestItem&&this._hitTestItem.OnMouseUp(t),this.nearestShapes=null,this.Invalidate(),this.ActiveConnector){var e=this._hitTestItem;if(null!=e)e.Target,e.ActiveEditPoint;this.ActiveConnector=null}}},{key:"UpdateNearestShapes",value:function(t){var e=null==this.nearestShapes?0:this.nearestShapes.length,n=null==t?0:t.length;this.nearestShapes=t,0==n&&(this.ActiveConnector=null),e!=n&&this.Invalidate()}},{key:"Canvas",get:function(){return this._canvas}},{key:"HitTestItem",get:function(){return this._hitTestItem}}]),t}()),d=function(){function t(e,n,i,s){Object(r["a"])(this,t),this._ratio=i,this._canvas=e,this._propertyPanel=s,this.Adorners=new f(this,n),this.SelectionService=new l(this),this.ScaleCanvas(e,e.width,e.height,i),this.ScaleCanvas(n,n.width,n.height,i)}return Object(o["a"])(t,[{key:"ScaleCanvas",value:function(t,e,n,i){if(1!==i){t.width=e*i,t.height=n*i,t.style.width=e+"px",t.style.height=n+"px";var s=t.getContext("2d");s.scale(i,i),s.save()}}},{key:"OnResize",value:function(t,e){1!==this._ratio&&(this.ScaleCanvas(this._canvas,t,e,this._ratio),this.ScaleCanvas(this.Adorners.Canvas,t,e,this._ratio)),this.Invalidate()}},{key:"AddItem",value:function(t){this._items||(this._items=new Array),t.Surface=this,this._items.push(t),t.OnAddToSurface()}},{key:"RemoveItem",value:function(t){t.OnRemoveFromSurface(),t.Surface=null;var e=this._items.indexOf(t);this._items.splice(e,1)}},{key:"Invalidate",value:function(t){var e;e=t||new h["a"](0,0,this._canvas.width/this._ratio,this._canvas.height/this._ratio);var n=this._canvas.getContext("2d");n.clearRect(e.X,e.Y,e.Width,e.Height);for(var i=0;i<this._items.length;i++){var s=this._items[i];if(s.Visible&&e.IntersectsWith(s.Bounds)){var r=s.Bounds.X,o=s.Bounds.Y;n.translate(r,o),s.Paint(n),n.translate(-r,-o)}}this.Adorners.Invalidate()}},{key:"OnMouseDown",value:function(t){this._hoverItem&&this._hoverItem.PreviewMouseDown(t)||null==this.Adorners.HitTestItem&&this.SelectionService.SelectItem(this._hoverItem)}},{key:"OnMouseMove",value:function(t){t.Button===u["a"].None&&this.Adorners.HitTest(new a["a"](t.X,t.Y))||(t.Button===u["a"].Left&&(this.Adorners.HitTestItem?this.Adorners.HitTestItem.OnMouseMove(t):this.SelectionService.MoveSelection(t.DeltaX,t.DeltaY)),this.FindHoverItemOnMouseMove(t))}},{key:"OnMouseUp",value:function(t){t.Button===u["a"].Left&&(this.Adorners.OnMouseUp(t),this.SelectionService.OnMouseUp(t))}},{key:"FindHoverItemOnMouseMove",value:function(t){var e=this._canvas.getContext("2d");if(this._hoverItem){var n=this._hoverItem.PointToSurface(new a["a"](0,0)),i=t.X-n.X,s=t.Y-n.Y;if(this._hoverItem.HitTest(i,s,e))return void(this._hoverItem.IsContainer&&(this._hoverItem=this._hoverItem.FindHoverItem(new a["a"](i,s),e)))}this._hoverItem=this.GetItemUnderMouse(t.X,t.Y,e)}},{key:"GetItemUnderMouse",value:function(t,e,n){var i=null;if(this._items)for(var s=0;s<this._items.length;s++){var r=this._items[s],o=t-r.Bounds.X,h=e-r.Bounds.Y;r.Visible&&r.HitTest(o,h,n)&&(i=r,i.IsContainer&&(i=i.FindHoverItem(new a["a"](o,h),n)))}return i}},{key:"PropertyPanel",get:function(){return this._propertyPanel}},{key:"Items",get:function(){return this._items}},{key:"PixelRatio",get:function(){return this._ratio}}]),t}(),v=function t(e,n,i,s,o,a){Object(r["a"])(this,t),this.Button=e,this.Clicks=n,this.X=i,this.Y=s,this.DeltaX=o,this.DeltaY=a},g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ide-property-panel"},[n("h4",{staticClass:"propertyPanel-title"},[t._v(t._s(t.ownerType))]),n("el-collapse",{staticClass:"ide-property-collapse",attrs:{value:t.expands}},t._l(t.catalogs,(function(e){return n("el-collapse-item",{key:e.name,attrs:{title:e.name,name:e.name}},[n("el-form",{attrs:{"label-position":"right",size:"mini","label-width":"100px"}},t._l(e.items,(function(t){return n("el-form-item",{key:t.title,attrs:{label:t.title}},[n(t.editor,{tag:"component",attrs:{target:t}})],1)})),1)],1)})),1)],1)},p=[],m=(n("7f7f"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-input",{attrs:{readonly:t.target.readonly},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})}),y=[],b={props:{target:{type:Object}},data:function(){return{value:""}},watch:{target:function(t){this.value=t.getter()},value:function(t){this.target.readonly||this.target.setter(t)}},mounted:function(){this.value=this.target.getter()}},_=b,S=n("2877"),k=Object(S["a"])(_,m,y,!1,null,null,null),w=k.exports,C={TextBox:w};function B(t){return C[t]}var I={data:function(){return{ownerType:"",expands:[],catalogs:[]}},methods:{setPropertyOwner:function(t){this.ownerType=t.getPropertyOwnerType();var e=t.getPropertyItems();if(e){this.expands.splice(0,this.expands.length);for(var n=0;n<e.length;n++){var i=e[n];this.expands.push(i.name);for(var s=0;s<i.items.length;s++){var r=i.items[s];r.editor=B(r.editorType)}}this.catalogs=e}else this.catalogs=[]}}},O=I,T=(n("1102"),Object(S["a"])(O,g,p,!1,null,"01ff3100",null)),X=T.exports,Y={components:{PropertyPanel:X},props:{background:{type:String,default:"white"}},data:function(){return{height:0,designSurface:null,pixelRatio:1}},methods:{onmousemove:function(t){var e=t.movementX,n=t.movementY;if(0!==e||0!==n){var i=new v(t.buttons,0,t.layerX,t.layerY,e,n);this.designSurface.OnMouseMove(i)}},onmousedown:function(t){var e=new v(t.buttons,0,t.layerX,t.layerY,0,0);this.designSurface.OnMouseDown(e)},onmouseup:function(t){var e=0;0===t.button&&(e=1);var n=new v(e,0,t.layerX,t.layerY,0,0);this.designSurface.OnMouseUp(n)},onSplitterResize:function(t){this.designSurface&&(this.$refs.surface.width=this.$refs.adorner.width=this.$refs.stage.clientWidth,this.$refs.surface.height=this.$refs.adorner.height=this.$refs.stage.clientHeight,this.designSurface.OnResize(t,this.$refs.stage.clientHeight))}},mounted:function(){var t=this;this.pixelRatio=window.devicePixelRatio||1,this.$nextTick((function(){t.$refs.surface.width=t.$refs.adorner.width=t.$refs.stage.clientWidth,t.$refs.surface.height=t.$refs.adorner.height=t.$refs.stage.clientHeight,t.designSurface=new d(t.$refs.surface,t.$refs.adorner,t.pixelRatio,t.$refs.propertyPanel)}))}},P=Y,R=(n("8828"),Object(S["a"])(P,i,s,!1,null,"0512ead2",null));e["a"]=R.exports},ce7e:function(t,e,n){var i=n("63b6"),s=n("584a"),r=n("294c");t.exports=function(t,e){var n=(s.Object||{})[t]||Object[t],o={};o[t]=e(n),i(i.S+i.F*r((function(){n(1)})),"Object",o)}},dc62:function(t,e,n){n("9427");var i=n("584a").Object;t.exports=function(t,e){return i.create(t,e)}},ead6:function(t,e,n){var i=n("f772"),s=n("e4ae"),r=function(t,e){if(s(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n("d864")(Function.call,n("bf0b").f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(s){e=!0}return function(t,n){return r(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:r}},fa99:function(t,e,n){n("0293"),t.exports=n("584a").Object.getPrototypeOf},fde4:function(t,e,n){n("bf90");var i=n("584a").Object;t.exports=function(t,e){return i.getOwnPropertyDescriptor(t,e)}},fe0c:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("d225"),s=n("b0b4"),r=function(){function t(e,n){Object(i["a"])(this,t),this.Owner=e,this.Target=n}return Object(s["a"])(t,[{key:"HitTest",value:function(t){return[!1,""]}},{key:"OnRender",value:function(t){}},{key:"OnMouseMove",value:function(t){}},{key:"OnMouseUp",value:function(t){}},{key:"IsSelectionAdorner",get:function(){return!0}}]),t}()},fe34:function(t,e,n){"use strict";var i;(function(t){t[t["None"]=0]="None",t[t["Left"]=1]="Left",t[t["Right"]=2]="Right",t[t["Middle"]=4]="Middle"})(i||(i={})),e["a"]=i}}]);